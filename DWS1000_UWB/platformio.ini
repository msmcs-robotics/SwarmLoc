[platformio]
default_envs = initiator
src_dir = src/initiator

[env]
; Common settings for both environments
platform = atmelavr
board = uno
framework = arduino
monitor_speed = 9600
monitor_filters =
    default
    time
monitor_flags =
    --echo
; Compiler flags for optimization and warnings
build_flags =
    -Wall
    -Wextra
    -DDEBUG_SERIAL=1
; Library dependencies
lib_deps =
    ; DW1000 library (local copy in lib/DW1000)
    ; Hardware confirmed: DW1000 chip (Device ID: 0xDECA0130)
    SPI

[env:initiator]
; Initiator-specific configuration
src_dir = src/initiator
upload_port = /dev/ttyACM0
monitor_port = /dev/ttyACM0
build_flags =
    ${env.build_flags}
    -DDEVICE_ROLE=INITIATOR
    -DDEVICE_ADDRESS=0x01
    -DTARGET_ADDRESS=0x02

[env:responder]
; Responder-specific configuration
src_dir = src/responder
upload_port = /dev/ttyACM1
monitor_port = /dev/ttyACM1
build_flags =
    ${env.build_flags}
    -DDEVICE_ROLE=RESPONDER
    -DDEVICE_ADDRESS=0x02
    -DTARGET_ADDRESS=0x01

; ESP32 backup environments (for future migration if needed)
; Uncomment when ESP32 boards are available

; [env:initiator_esp32]
; platform = espressif32
; board = esp32dev
; framework = arduino
; src_dir = src/initiator
; upload_port = /dev/ttyUSB0
; monitor_port = /dev/ttyUSB0
; monitor_speed = 115200
; build_flags =
;     -DDEVICE_ROLE=INITIATOR
;     -DDEVICE_ADDRESS=0x01
;     -DTARGET_ADDRESS=0x02
;     -DESP32_PLATFORM=1
; lib_deps =
;     https://github.com/Fhilb/DW3000_Arduino.git

; [env:responder_esp32]
; platform = espressif32
; board = esp32dev
; framework = arduino
; src_dir = src/responder
; upload_port = /dev/ttyUSB1
; monitor_port = /dev/ttyUSB1
; monitor_speed = 115200
; build_flags =
;     -DDEVICE_ROLE=RESPONDER
;     -DDEVICE_ADDRESS=0x02
;     -DTARGET_ADDRESS=0x01
;     -DESP32_PLATFORM=1
; lib_deps =
;     https://github.com/Fhilb/DW3000_Arduino.git
